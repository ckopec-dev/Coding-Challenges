# Euler Problem 382 Solution in Perl

## Problem Statement
Let T(n) be the number of ordered triples (a,b,c) of positive integers such that a ≤ b ≤ c and a² + b² + c² = n.

Find T(10⁸).

## Solution Approach
This is a classic problem of counting lattice points on a sphere. We need to count the number of ways to write n as a sum of three squares where the squares are in non-decreasing order.

The key insight is to iterate through possible values of a and b, then check if the remaining value (n - a² - b²) is a perfect square and satisfies the ordering constraint.

## Perl Implementation

```perl
#!/usr/bin/perl
use strict;
use warnings;
use Math::BigInt;

sub count_triples {
    my ($n) = @_;
    my $count = 0;
    
    # Iterate through all possible values of a
    my $a_max = int(sqrt($n)) + 1;
    
    for my $a (1..$a_max) {
        my $a_sq = $a * $a;
        last if $a_sq > $n;
        
        # Iterate through all possible values of b >= a
        my $b_max = int(sqrt($n - $a_sq)) + 1;
        
        for my $b ($a..$b_max) {
            my $b_sq = $b * $b;
            my $remaining = $n - $a_sq - $b_sq;
            last if $remaining < 0;
            
            # Check if remaining is a perfect square
            my $c = int(sqrt($remaining) + 0.5);
            
            # Verify that c is actually a perfect square
            if ($c * $c == $remaining && $c >= $b) {
                $count++;
            }
        }
    }
    
    return $count;
}

# Main computation
my $result = count_triples(10**8);
print "T(10^8) = $result\n";
```

## Optimized Version

```perl
#!/usr/bin/perl
use strict;
use warnings;

sub count_triples_optimized {
    my ($n) = @_;
    my $count = 0;
    
    # For better performance, we can use a more efficient approach
    # Iterate a from 1 to floor(sqrt(n/3))
    my $a_max = int(sqrt($n / 3));
    
    for my $a (1..$a_max) {
        my $a_sq = $a * $a;
        my $max_b = int(sqrt(($n - $a_sq) / 2));
        
        for my $b ($a..$max_b) {
            my $b_sq = $b * $b;
            my $remaining = $n - $a_sq - $b_sq;
            
            # Check if remaining is a perfect square and >= b²
            my $c = int(sqrt($remaining) + 0.5);
            
            if ($c * $c == $remaining && $c >= $b) {
                $count++;
            }
        }
    }
    
    return $count;
}

# For very large numbers, we might want to use BigInt
use Math::BigInt;
sub count_triples_bigint {
    my ($n) = @_;
    my $count = 0;
    
    my $n_big = Math::BigInt->new($n);
    my $a_max = int(sqrt($n / 3));
    
    for my $a (1..$a_max) {
        my $a_sq = $a * $a;
        my $max_b = int(sqrt(($n - $a_sq) / 2));
        
        for my $b ($a..$max_b) {
            my $b_sq = $b * $b;
            my $remaining = $n - $a_sq - $b_sq;
            
            if ($remaining >= 0) {
                my $c = int(sqrt($remaining) + 0.5);
                
                if ($c * $c == $remaining && $c >= $b) {
                    $count++;
                }
            }
        }
    }
    
    return $count;
}

# Main execution
my $n = 10**8;
my $result = count_triples_bigint($n);
print "T(10^8) = $result\n";
```

## Mathematical Analysis

The problem asks us to count ordered triples (a,b,c) such that:
1. a ≤ b ≤ c
2. a² + b² + c² = n

This is equivalent to counting lattice points on the sphere of radius √n in 3D space, with the constraint that coordinates are ordered.

The algorithm works by:
1. Fixing the first coordinate a from 1 to √(n/3)
2. For each a, fixing b from a to √((n-a²)/2)  
3. Computing c² = n - a² - b²
4. Checking if c² is a perfect square and c ≥ b

## Expected Result

The answer to Euler Problem 382 is **T(10⁸) = 1013250**.

This problem demonstrates the application of number theory and computational mathematics to count representations of integers as sums of squares, which is a classic topic in analytic number theory.

