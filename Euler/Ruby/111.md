# Euler Problem 111 Solution in Ruby

This problem asks us to find the sum of all 0 to 9 digits that are prime and have a specific pattern of repeated digits.

```ruby
require 'prime'

def solve_euler_111
  # For each digit d from 0 to 9, we need to find all 10-digit primes
  # that have exactly 9 occurrences of digit d
  # This means exactly 1 digit is different from d
  
  # We'll use a different approach: generate all 10-digit numbers with
  # 9 occurrences of a digit and check if they're prime
  
  results = []
  
  # For each digit d (0-9)
  (0..9).each do |d|
    # We need 9 occurrences of digit d and 1 occurrence of some other digit
    # The other digit can be any digit from 0-9 except d
    # The position of the different digit can be any of 10 positions
    
    sum = 0
    count = 0
    
    # Try all positions for the different digit
    (0..9).each do |pos|
      # Try all possible different digits (0-9, except d)
      (0..9).each do |diff_digit|
        next if diff_digit == d
        
        # Create the 10-digit number
        digits = Array.new(10, d)
        digits[pos] = diff_digit
        
        # Convert to number
        num = digits.join.to_i
        
        # Check if it's a 10-digit number (starts with non-zero)
        next if digits[0] == 0
        
        # Check if it's prime
        if Prime.prime?(num)
          sum += num
          count += 1
        end
      end
    end
    
    results << [d, sum, count]
  end
  
  # But wait, let's re-read the problem...
  # We want the sum of ALL 10-digit primes that have exactly 9 of the same digit
  # This is a bit more complex
  
  # Let's try a more systematic approach
  total_sum = 0
  
  # For each digit d from 0 to 9
  (0..9).each do |d|
    # Generate all 10-digit numbers with exactly 9 occurrences of digit d
    # and 1 occurrence of another digit
    
    # Create all possible positions for the different digit
    (0..9).each do |pos|
      # For each possible different digit (0-9, except d)
      (0..9).each do |diff_digit|
        next if diff_digit == d
        
        # Create the number with 9 d's and 1 diff_digit at position pos
        digits = Array.new(10, d)
        digits[pos] = diff_digit
        
        # Skip if it's not a valid 10-digit number (starts with 0)
        next if digits[0] == 0
        
        num = digits.join.to_i
        
        # Check if it's prime and add to sum
        if Prime.prime?(num)
          total_sum += num
        end
      end
    end
  end
  
  total_sum
end

# More efficient approach - let's use a better method
def solve_euler_111_v2
  # We want 10-digit primes that have exactly 9 of one digit
  # This means 10-digit primes with 9 identical digits and 1 different digit
  
  primes = []
  
  # Generate all numbers with 9 occurrences of a digit and 1 different digit
  # We'll iterate through all combinations
  
  # For each digit d from 0 to 9
  (0..9).each do |d|
    # For each position where the different digit goes (0-9)
    (0..9).each do |pos|
      # For each different digit (0-9, excluding d)
      (0..9).each do |diff_digit|
        next if diff_digit == d
        
        # Create the 10-digit number
        digits = Array.new(10, d)
        digits[pos] = diff_digit
        
        # Skip if it's not a valid 10-digit number
        next if digits[0] == 0
        
        num = digits.join.to_i
        
        # Check if it's prime
        if Prime.prime?(num)
          primes << num
        end
      end
    end
  end
  
  primes.sum
end

# Actually, let's think more carefully about what the problem is asking
# Looking at the problem again, it's about primes that have a specific pattern
# Let me read it more carefully and solve it properly

def solve_euler_111_final
  # For each digit d from 0 to 9, we want to find the sum of all 10-digit primes
  # that have exactly 9 occurrences of digit d
  
  # We'll generate all 10-digit numbers with 9 of digit d and 1 of some other digit
  # Then check which ones are prime
  
  total_sum = 0
  
  # For each digit d (0-9)
  (0..9).each do |d|
    # For each of the 10 positions where the different digit can be placed
    (0..9).each do |pos|
      # For each possible different digit (0-9, excluding d)
      (0..9).each do |diff_digit|
        next if diff_digit == d
        
        # Create the 10-digit number
        digits = Array.new(10, d)
        digits[pos] = diff_digit
        
        # Skip if it's not a valid 10-digit number (starts with 0)
        next if digits[0] == 0
        
        num = digits.join.to_i
        
        # Check if it's prime and add to sum
        if Prime.prime?(num)
          total_sum += num
        end
      end
    end
  end
  
  total_sum
end

# Run the solution
result = solve_euler_111_final
puts "Answer: #{result}"
```

However, let me reconsider this problem more carefully. The problem asks for a specific sum related to 10-digit primes with repeated digits.

Looking at the actual problem statement and typical Euler problems, here's a cleaner approach:

```ruby
require 'prime'

def solve_euler_111
  # This is asking for the sum of all 10-digit primes that contain exactly 9 of one digit
  # We'll generate all such numbers and check if they're prime
  
  total_sum = 0
  
  # For each digit 0-9 (the repeated digit)
  (0..9).each do |repeated_digit|
    # For each position where the different digit will go (0-9)
    (0..9).each do |position|
      # For each possible different digit (0-9, excluding the repeated digit)
      (0..9).each do |different_digit|
        next if different_digit == repeated_digit
        
        # Create the 10-digit number
        digits = Array.new(10, repeated_digit)
        digits[position] = different_digit
        
        # Skip if it's not a valid 10-digit number (doesn't start with 0)
        next if digits[0] == 0
        
        num = digits.join.to_i
        
        # Check if it's prime
        if Prime.prime?(num)
          total_sum += num
        end
      end
    end
  end
  
  total_sum
end

# Execute the solution
answer = solve_euler_111
puts "Euler Problem 111 Answer: #{answer}"
```

This Ruby solution:

1. **Iterates through all possible patterns**: For each digit 0-9, it considers it as the repeated digit
2. **Places the different digit**: For each of the 10 positions, it places a different digit (0-9, excluding the repeated digit)
3. **Validates 10-digit numbers**: Ensures the number doesn't start with 0
4. **Checks primality**: Uses Ruby's built-in `Prime.prime?` method
5. **Sums all valid primes**: Accumulates the sum of all qualifying primes

The approach systematically generates all possible 10-digit numbers with exactly 9 occurrences of one digit and 1 occurrence of another digit, then filters for primes.

