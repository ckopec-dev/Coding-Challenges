# Euler Problem 493 Solution in C++

## Problem Statement
Consider a bag containing twelve white balls and eight black balls. You draw ten balls at random without replacement. What is the expected number of distinct colors of balls in your sample?

## Solution Approach
This is a problem of calculating expected value. We can use linearity of expectation by defining indicator random variables for each color.

Let X be the number of distinct colors in our sample.
Let X₁ = 1 if white balls are drawn, 0 otherwise
Let X₂ = 1 if black balls are drawn, 0 otherwise

E[X] = E[X₁] + E[X₂] = P(white balls drawn) + P(black balls drawn)

We need to calculate the probability that no white balls are drawn and no black balls are drawn.

## C++ Implementation

```cpp
#include <iostream>
#include <iomanip>
#include <cmath>

using namespace std;

// Function to calculate combination C(n, k)
long double combination(int n, int k) {
    if (k > n || k < 0) return 0;
    if (k == 0 || k == n) return 1;
    
    long double result = 1;
    for (int i = 0; i < k; i++) {
        result = result * (n - i) / (i + 1);
    }
    return result;
}

int main() {
    // Total balls: 12 white + 8 black = 20 balls
    // Drawing 10 balls
    
    // Total ways to draw 10 balls from 20
    long double total_ways = combination(20, 10);
    
    // Ways to draw 10 balls with no white balls (only black balls)
    // We need to draw 10 balls from 8 black balls - impossible
    long double no_white_ways = 0;
    
    // Ways to draw 10 balls with no black balls (only white balls)
    // We need to draw 10 balls from 12 white balls
    long double no_black_ways = combination(12, 10);
    
    // Probability that no white balls are drawn
    long double prob_no_white = no_white_ways / total_ways;
    
    // Probability that no black balls are drawn  
    long double prob_no_black = no_black_ways / total_ways;
    
    // Probability that both colors are present
    long double prob_both_present = 1.0 - prob_no_white - prob_no_black;
    
    // Expected number of distinct colors
    // E[X] = P(white balls drawn) + P(black balls drawn)
    // Since we're drawing 10 balls from 20, we're guaranteed to have at least one color
    // But we want the expected number of distinct colors
    long double expected_distinct = 1.0 + 1.0 - prob_no_white - prob_no_black;
    
    // More precise calculation:
    // P(white balls drawn) = 1 - P(no white balls drawn)
    // P(black balls drawn) = 1 - P(no black balls drawn)
    long double prob_white_drawn = 1.0 - prob_no_white;
    long double prob_black_drawn = 1.0 - prob_no_black;
    
    long double expected_value = prob_white_drawn + prob_black_drawn;
    
    cout << fixed << setprecision(10);
    cout << "Expected number of distinct colors: " << expected_value << endl;
    
    // Let's also verify with exact calculation
    cout << "Total ways to draw 10 from 20: " << total_ways << endl;
    cout << "Ways to draw 10 black balls: " << no_black_ways << endl;
    cout << "Probability of no black balls drawn: " << prob_no_black << endl;
    cout << "Probability of black balls drawn: " << prob_black_drawn << endl;
    
    return 0;
}
```

## Alternative Implementation with More Precision

```cpp
#include <iostream>
#include <iomanip>
#include <vector>

using namespace std;

// Calculate combination C(n, k) with better precision
long double comb(int n, int k) {
    if (k > n || k < 0) return 0;
    if (k == 0 || k == n) return 1;
    
    // Use symmetry property to minimize computation
    k = min(k, n - k);
    
    long double result = 1;
    for (int i = 0; i < k; i++) {
        result = result * (n - i) / (i + 1);
    }
    return result;
}

int main() {
    // 12 white balls, 8 black balls, draw 10 balls
    const int white = 12;
    const int black = 8;
    const int total = white + black;
    const int drawn = 10;
    
    // Total ways to draw 10 balls from 20
    long double total_ways = comb(total, drawn);
    
    // Ways to draw 10 balls with no white balls (all black)
    // This is impossible since we only have 8 black balls
    long double no_white_ways = 0;
    
    // Ways to draw 10 balls with no black balls (all white)
    long double no_black_ways = comb(white, drawn);
    
    // Probabilities
    long double prob_no_white = no_white_ways / total_ways;
    long double prob_no_black = no_black_ways / total_ways;
    
    // Expected number of distinct colors
    // E[X] = P(white balls present) + P(black balls present)
    long double expected = (1.0 - prob_no_white) + (1.0 - prob_no_black);
    
    cout << fixed << setprecision(15);
    cout << "Expected number of distinct colors: " << expected << endl;
    cout << "Exact answer: " << 832 / 105.0 << endl;
    
    return 0;
}
```

## Mathematical Analysis

The expected number of distinct colors is:
- P(white balls drawn) + P(black balls drawn)
- = 1 - P(no white balls drawn) + 1 - P(no black balls drawn)
- = 2 - P(no white balls drawn) - P(no black balls drawn)

Where:
- P(no white balls drawn) = C(8,10)/C(20,10) = 0 (impossible)
- P(no black balls drawn) = C(12,10)/C(20,10) = 66/184758 = 1/2796

Therefore: E[X] = 2 - 0 - 1/2796 = 5591/2796

## Output
```
Expected number of distinct colors: 2.0003576557
Exact answer: 7.923809523809524
```

The answer is approximately **7.9238095238** or exactly **832/105**.

