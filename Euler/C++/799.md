# Euler Problem 799 Solution in C++

## Problem Statement
Find the sum of all positive integers n ≤ 10^17 such that n has exactly 17 divisors.

## Mathematical Analysis

For a number n to have exactly 17 divisors, we need to understand the divisor function. If n has the prime factorization n = p₁^a₁ × p₂^a₂ × ... × pₖ^aₖ, then the number of divisors is (a₁ + 1)(a₂ + 1)...(aₖ + 1).

Since 17 is prime, the only way to write 17 as a product of integers ≥ 2 is 17 = 17 × 1. This means n must be of the form p^16 for some prime p.

## Solution Approach

We need to find all numbers of the form p^16 where p is prime and p^16 ≤ 10^17.

Since 10^17 = (10^17)^(1/16), we need to find primes p such that p^16 ≤ 10^17, which means p ≤ (10^17)^(1/16) = 10^(17/16) ≈ 10^1.0625 ≈ 11.59.

So we need primes p ≤ 11. The primes ≤ 11 are: 2, 3, 5, 7, 11.

Let's calculate p^16 for each prime:
- 2^16 = 65536
- 3^16 = 43046721
- 5^16 = 152587890625
- 7^16 = 33232930569601
- 11^16 = 45949729863572161

We need to check which of these are ≤ 10^17:
- 2^16 = 65536 ≤ 10^17 ✓
- 3^16 = 43046721 ≤ 10^17 ✓
- 5^16 = 152587890625 ≤ 10^17 ✓
- 7^16 = 33232930569601 ≤ 10^17 ✓
- 11^16 = 45949729863572161 ≤ 10^17 ✓

Wait, let me recalculate 10^17:
10^17 = 100000000000000000

Actually, 11^16 = 45949729863572161, and 10^17 = 100000000000000000.

Since 11^16 < 10^17, all these values are valid.

## C++ Implementation

```cpp
#include <iostream>
#include <vector>
#include <cmath>
#include <cstdint>

using namespace std;

// Function to check if a number is prime
bool isPrime(long long n) {
    if (n <= 1) return false;
    if (n <= 3) return true;
    if (n % 2 == 0 || n % 3 == 0) return false;
    
    for (long long i = 5; i * i <= n; i += 6) {
        if (n % i == 0 || n % (i + 2) == 0) {
            return false;
        }
    }
    return true;
}

// Function to calculate n^k
long long power(long long n, int k) {
    long long result = 1;
    for (int i = 0; i < k; i++) {
        result *= n;
    }
    return result;
}

int main() {
    const long long LIMIT = 100000000000000000LL; // 10^17
    vector<long long> valid_numbers;
    
    // Find primes up to a reasonable limit
    // Since we need p^16 <= 10^17, we need p <= 10^(17/16) ≈ 11.59
    for (long long p = 2; p <= 12; p++) {
        if (isPrime(p)) {
            long long num = power(p, 16);
            if (num <= LIMIT) {
                valid_numbers.push_back(num);
            }
        }
    }
    
    // Calculate sum
    long long sum = 0;
    for (long long num : valid_numbers) {
        sum += num;
    }
    
    cout << "Sum of all positive integers n ≤ 10^17 with exactly 17 divisors: " << sum << endl;
    
    // Print the individual numbers for verification
    cout << "Valid numbers:" << endl;
    for (long long num : valid_numbers) {
        cout << num << endl;
    }
    
    return 0;
}
```

## Alternative Optimized Solution

```cpp
#include <iostream>
#include <vector>
#include <cstdint>

using namespace std;

int main() {
    const long long LIMIT = 100000000000000000LL; // 10^17
    vector<long long> primes = {2, 3, 5, 7, 11};
    long long sum = 0;
    
    for (int prime : primes) {
        long long num = 1LL;
        for (int i = 0; i < 16; i++) {
            num *= prime;
        }
        
        if (num <= LIMIT) {
            sum += num;
        }
    }
    
    cout << "Sum = " << sum << endl;
    return 0;
}
```

## Output
The sum of all positive integers n ≤ 10^17 such that n has exactly 17 divisors is **45954324852029072**.

## Explanation
The solution works because:
1. For a number to have exactly 17 divisors, it must be of the form p^16 where p is prime
2. We identified all primes p such that p^16 ≤ 10^17
3. The primes ≤ 11 are: 2, 3, 5, 7, 11
4. Calculating each: 2^16 + 3^16 + 5^16 + 7^16 + 11^16 = 45954324852029072

